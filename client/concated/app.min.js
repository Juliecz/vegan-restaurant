function loginPost(){$(document).ready(function(){var a,b;$("#submit").click(function(){a=$("#username").val(),b=$("#password").val(),$.post("http://localhost:3000/admin",{user:a,password:b},function(a){})})})}function initialize(){var a=(new google.maps.DirectionsService,new google.maps.DirectionsRenderer),b=new google.maps.LatLng(50.03855328103505,14.512730911374092),c={zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP,center:b},d=new google.maps.Map(document.getElementById("map"),c),e=new google.maps.Marker({position:b,map:d,title:"Veganska restaurace",animation:google.maps.Animation.DROP});a.setMap(d,e)}function initH1(){document.getElementById("h1Kontrola").innerHTML="caaaaau"}function FindAll(a){Drink.find(function(b,c){b&&a.send(b),a.json(c)})}function findAllFunc(a){Menu.find(function(b,c){b&&a.send(b),console.log(c),a.json(c)})}angular.module("veganapp.admin").controller("headCtrl",["$scope","authProvider",function(a,b){}]),angular.module("veganapp.admin").controller("dailyMenuCtrl",["$scope","$state","$stateParams","$window","dailyMenuAdmin",function(a,b,c,d,e){a.day=["Pondělí","Úterý","Středa","Čtvrtek","Pátek"],a.dayObj=[],a.activeTab="pondeli",a.actions={"new":"Pridat nove jidlo",edit:"Upravit jidlo"},a.days=[{id:"pondeli",name:"Pondělí"},{id:"utery",name:"Úterý"},{id:"streda",name:"Středa"},{id:"ctvrtek",name:"Čtvrtek"},{id:"patek",name:"Pátek"}],a.winSize=d.innerWidth,e.getDay().success(function(b,c){a.datum=b,console.log("Status getday: ",c)}),e.getDailyMenu().success(function(b,c){if(a.data=b,a.data&&a.datum){for(var d=0;d<a.day.length;d++)a.dayObj.push({name:a.datum[d],text:a.day[d]});console.log("Day arr object",a.dayObj)}}),e.getSort().success(function(b,c){a.typ=b,console.log("Typ: ",a.typ)}),a.setAction=function(d,f){c.action=d,c.id=f;var g={};"new"==c.action?(g={action:c.action,actionName:a.actions["new"],id:f,object:{},menuType:"daily"},c.actionName=a.actions["new"],b.go("admin.edit",g)):"edit"==c.action?e.getById(f).success(function(d,e){g={action:c.action,actionName:a.actions.edit,id:f,object:d,menuType:"daily"},b.go("admin.edit/:id",g)}):"delete"==c.action,console.log(g)},a.activeTab="pondeli",a.setTab=function(b){a.activeTab=b}}]),angular.module("veganapp.admin").controller("editCtrl",["$scope","$state","$stateParams","getMenu","dailyMenuAdmin","drinkMenu",function(a,b,c,d,e,f){switch(a.typMenu=["Staly jídelní lístek","Polední menu","Nápojový lístek"],a.typMenuId=["menu","daily","drink"],a.stateTypMenu=c.menuType,a.typMenuSelected=c.action,a.action="Action",c.menuType){case"menu":"new"==c.action?a.action="Přidat nové jídlo do jídelního lístku":"edit"==c.action&&(a.action="Upravit jídlo");break;case"daily":"new"==c.action?a.action="Přidat nové jídlo do poledního menu":"edit"==c.action&&(a.action="Upravit jídlo poledním menu");break;case"drink":"new"==c.action?a.action="Přidat nový nápoj":"edit"==c.action&&(a.action="Upravit nápoj");break;default:b.go("admin.menu")}e.getDay().success(function(b,c){a.den=b}),d.getFood().success(function(b,c){a.dataMenu=b,console.log(c),console.log(a.dataMenu)}),d.getSort().success(function(b){a.trida=b}),d.getTyp().success(function(b){a.typ=b}),f.getSort().success(function(b){a.sortDrink=b}),"edit"==c.action?(a.formData={jmeno:c.object.foodName,popis:c.object.foodDescription,typ:c.object.foodType,trida:c.object.foodSort,cena:c.object.price},"menu"==c.menuType?a.formData.typMenu=a.typMenu[0]:"daily"==c.menuType?a.formData.typMenu=a.typMenu[1]:a.formData.typMenu=a.typMenu[2]):"new"==c.action&&(a.formData={jmeno:"",popis:"",typ:"",trida:"",cena:""},"menu"==c.menuType?a.formData.typMenu=a.typMenu[0]:"daily"==c.menuType?a.formData.typMenu=a.typMenu[1]:a.formData.typMenu=a.typMenu[2]),a.sendPost=function(){var d={};"new"==c.action?(d={jmeno:a.formData.jmeno,popis:a.formData.popis,typ:a.formData.typ,trida:a.formData.trida,cena:a.formData.cena,den:a.formData.den},a.createFood(d),b.go("admin.menu")):"edit"==c.action&&(d={jmeno:a.formData.jmeno,popis:a.formData.popis,typ:a.formData.typ,trida:a.formData.trida,cena:a.formData.cena},a.editFood(d),b.go("admin.menu"))},a.createFood=function(a){a&&d.createFood(a).success()},a.editFood=function(a){a&&d.updateFood(c.id,a).success()}}]),angular.module("veganapp.admin").controller("homeCtrlA",["$scope","$http","$stateParams","authProvider",function(a,b,c,d){}]),angular.module("veganapp.admin").controller("loginCtrl",["$scope","$state","$http","$rootScope","$location","authProvider",function(a,b,c,d,e,f){a.user={},a.login=function(){f.login(a.user.username,a.user.password).then(function(a){b.go("admin")})["catch"](function(){a.outputData="Zadejte spravne udaje"})}}]),angular.module("veganapp.admin").controller("menuCtrl",["$scope","$state","$stateParams","getMenu","drinkMenu",function(a,b,c,d,e){a.activeTab="jidelni",a.setTab=function(b){a.activeTab=b,"jidelni"==a.activeTab?a.actions={"new":"Přidat nové jídlo",edit:"Upravit jídlo"}:a.actions={"new":"Přidat nový nápoj",edit:"Upravit nápoj"}},"jidelni"==a.activeTab?a.actions={"new":"Přidat nové jídlo",edit:"Upravit jídlo"}:a.actions={"new":"Přidat nový nápoj",edit:"Upravit nápoj"},a.dataMenu={},a.typ={},a.trida={},a.tridaVar=[],d.getFood().success(function(b,c){a.dataMenu=b}),d.getTyp().success(function(b,c){a.typ=b}),d.getSort().success(function(b,c){if(a.trida=b,a.trida)for(var d=0;d<a.trida.length;d++)"predkrm"==a.trida[d]?a.tridaVar.push({name:"predkrm",text:"Předkrmy"}):"hlavni"==a.trida[d]?a.tridaVar.push({name:"hlavni",text:"Hlavní chody"}):"salat"==a.trida[d]?a.tridaVar.push({name:"salat",text:"Saláty"}):"dezert"==a.trida[d]&&a.tridaVar.push({name:"dezert",text:"Dezerty"})}),e.getDrinks().success(function(b){a.drinks=b}),a.setAction=function(e,f,g){c.action=e,c.id=f;var h={};if("new"==c.action)h={action:c.action,actionName:a.actions["new"],id:c.id,object:{},menuType:g},c.actionName=a.actions["new"],b.go("admin.edit",h);else if("edit"==c.action){for(var i=0;i<a.dataMenu.length;i++)if(a.dataMenu[i]._id==c.id){a.editFoodObj=a.dataMenu[i];break}h={action:c.action,actionName:a.actions.edit,id:c.id,object:a.editFoodObj,menuType:g},b.go("admin.edit/:id",h)}else"delete"==c.action&&(h={action:c.action,actionName:"delete",id:c.id},d.removeFood(h.id),d.getFood().success(function(b,c){a.dataMenu=b}))}}]),angular.module("veganapp.admin").controller("reservationCtrl",["$scope",function(a){}]),angular.module("veganapp.admin").controller("userCtrl",["$scope","$state","authProvider",function(a,b,c){c.isLoggedIn().then(function(b){a.id=b})}]),angular.module("veganapp.admin").controller("usersCtrl",["$scope","$state","$stateParams","getMenu","dailyMenuAdmin",function(a,b,c,d,e){}]),angular.module("veganapp.admin").config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("admin",{url:"/admin",views:{main:{templateUrl:"/views/admin/content.html",controller:"headCtrlA"}},resolve:{loggedInResolve:function(a,b){a.isLoggedIn().then(function(a){""!==a.data&&"0"!==a.data?b.go("admin.home"):b.go("login")},function(){b.go("login")})}},abstact:!0}).state("admin.home",{url:"/home",views:{admin:{templateUrl:"/views/admin/home.html",controller:"homeCtrlA"}}}).state("admin.user",{url:"/user",views:{admin:{templateUrl:"/views/admin/me.html",controller:"userCtrl"}}}).state("admin.users",{url:"/users",views:{admin:{templateUrl:"/views/admin/users.html",controller:"usersCtrl"}}}).state("admin.menu",{url:"/menu",views:{admin:{templateUrl:"/views/admin/menu.html",controller:"menuCtrl"}}}).state("admin.dailyMenu",{url:"/dailyMenu",views:{admin:{templateUrl:"/views/admin/dailyMenu.html",controller:"dailyMenuCtrl"}}}).state("admin.reservation",{url:"/reservation",views:{admin:{templateUrl:"/views/admin/reservation.html",controller:"reservationCtrl"}}}).state("admin.edit",{url:"/edit",views:{admin:{templateUrl:"/views/admin/edit.html",controller:"editCtrl"}},params:{action:null,actionName:null,id:null,object:{},menuType:null,day:null}}).state("admin.edit/:id",{url:"/edit/:id",views:{admin:{templateUrl:"/views/admin/edit.html",controller:"editCtrl"}},params:{action:null,actionName:null,id:null,object:{},menuType:null}}).state("login",{url:"/login",views:{main:{templateUrl:"/views/admin/login.html",controller:"loginCtrl"}},resolve:{loggedInResolve:function(a,b){a.isLoggedIn().then(function(a){console.log("resolve is running: ",a.data),""!==a.data&&"0"!==a.data?b.go("admin.home"):b.go("login")},function(){b.go("login")})}}})}]).run(["$state","$rootScope","$location","authProvider",function(a,b,c,d){}]).controller("headCtrlA",["$scope","$state","$stateParams","$location","$window","$document","authProvider","userFactory",function(a,b,c,d,e,f,g,h){a.logout=function(){g.logout().then(function(){d.url("/home")})},g.isLoggedIn().then(function(b){h.getUserById(b.data).success(function(b){console.log("Data from server: ",b),a.uzivatel=b})}),a.winSize=e.innerWidth,a.resizeWin=function(){e.innerWidth<768?(a.showLeftMenu=!1,a.classSmallScreen="smallScreen"):(a.showLeftMenu=!0,a.classSmallScreen="")},a.resizeWin(),$(window).resize(function(){a.$apply(function(){a.resizeWin(),a.winSize=e.innerWidth})}),a.showHideLeftMenu=function(){e.innerWidth<768&&(a.showLeftMenu?a.showLeftMenu=!1:a.showLeftMenu=!0,"smallScreen"===a.classSmallScreen?a.classSmallScreen="":a.classSmallScreen="smallScreen")},a.clickSection=function(){e.innerWidth<768&&(a.showLeftMenu=!1,a.classSmallScreen="smallScreen")}}]),angular.module("veganapp.admin").factory("dailyMenuAdmin",function(a){return{getDailyMenu:function(){return a.get("/api/dailymenu").success(function(a){this.jsonData=a})},getDay:function(){return a.get("/api/dailymenu/day").success(function(a){this.jsonData=a})},getType:function(){return a.get("/api/dailymenu/type").success(function(a){this.jsonData=a})},getSort:function(){return a.get("/api/dailymenu/sort").success(function(a){this.jsonData=a})},getById:function(b){return a.get("/api/dailymenu/id/"+b).success(function(a){this.jsonData=a})}}}),angular.module("veganapp.admin").factory("getMenu",function(a){return{getFood:function(){return a.get("/api/menu").success(function(a){this.jsonData=a})},getSort:function(){return a.get("/api/menu/sort").success(function(a){this.jsonData=a})},getTyp:function(){return a.get("/api/menu/type").success(function(a){this.jsonData=a})},createFood:function(b){return a.post("/api/menu",{foodName:b.jmeno,foodDescription:b.popis,foodType:b.typ,foodSort:b.trida,price:b.cena})},removeFood:function(b){return a["delete"]("/api/menu/"+b,{id:b})},updateFood:function(b,c){return a.put("/api/menu/"+b,{id:b,foodName:c.jmeno,foodDescription:c.popis,foodType:c.typ,foodSort:c.trida,price:c.cena})}}}),angular.module("veganapp.admin").factory("userFactory",function(a){return{getUserById:function(b){return a.get("/api/user/"+b,{id:b}).success(function(a){this.jsonData=a})}}}),angular.module("veganapp.public",["veganapp.system"]),angular.module("veganapp.admin",["veganapp.system"]);var myApp=angular.module("veganapp",["veganapp.public","veganapp.admin","veganapp.system"]);myApp.config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("root",{views:{main:{controller:["$state","$injector",function(a,b){}]}}}),b.otherwise("/home")}]).controller("contentCtrl",function(a,b,c){a.setContent=function(){},$(window).resize(function(){})}).run(["$location","$state",function(a,b){}]),angular.module("veganapp.admin").factory("authProvider",["$q","$timeout","$http","$location",function(a,b,c,d){return{login:function(a,b){return c.post("/api/login",{username:a,password:b}).success(function(a,b){return a}).error(function(){return 0})},isLoggedIn:function(){return c.get("/api/logged").success(function(a,b){return a}).error(function(){return 0})},logout:function(){return c.get("/api/logout").success(function(a,b){return a}).error(function(){return 0})}}}]),angular.module("veganapp").factory("drinkMenu",["$http",function(a){return{getDrinks:function(){return a.get("/api/drinkmenu").success(function(a){this.jsonData=a})},createDrink:function(){return a.post("/api/drinkmenu",{drinkName:formData.jmeno,drinkDescription:formData.popis,drinkType:formData.typ,drinkSort:formData.trida,price:formData.cena})},removeDrink:function(){return a["delete"]("/api/drinkmenu/"+id,{id:id})},updateDrink:function(){return a.put("/api/drinkmenu/"+id,{id:id,drinkName:formData.jmeno,drinkDescription:formData.popis,drinkType:formData.typ,drinkSort:formData.trida,price:formData.cena})},getById:function(b){return a.get("/api/drinkmenu/id/"+b,{id:b}).success(function(a){this.jsonData=a})},getSort:function(){return a.get("/api/drinkmenu/sort").success(function(a){this.jsonData=a})}}}]),angular.module("veganapp.public").controller("orderCtrl",function(a){}),angular.module("veganapp.public").controller("contactCtrl",function(a){initH1()}),angular.module("veganapp.public").controller("homeCtrl",function(a){a.test="testovani"}),angular.module("veganapp.public").controller("menuCtrlP",["$scope","$http","menuPublic",function(a,b,c){switch(a.today=(new Date).getDay(),0===a.today||6===a.today?a.vikend=!0:a.vikend=!1,a.tridaVar=[],a.poledni=[],a.todayStr="Pro dnešní den není žádné polední menu.",a.today){case 1:a.todayStr="pondeli";break;case 2:a.todayStr="utery";break;case 3:a.todayStr="streda";break;case 4:a.todayStr="ctvrtek";break;case 5:a.todayStr="patek"}a.tridaDaily=[{name:"polevka",text:"Polévka"},{name:"hlavni",text:"Hlavní chody"}],c.getMenu().success(function(b,c){a.data=b}),c.getDailyMenu().success(function(b,c){for(var d=0;d<b.length;d++)b[d].day===a.todayStr&&a.poledni.push(b[d])}),c.getSort().success(function(b,c){if(a.trida=b,a.amount=a.trida.length,a.trida)for(var d=0;d<a.trida.length;d++)"predkrm"==a.trida[d]?a.tridaVar.push({name:"predkrm",text:"Předkrmy"}):"hlavni"==a.trida[d]?a.tridaVar.push({name:"hlavni",text:"Hlavní chody"}):"salat"==a.trida[d]?a.tridaVar.push({name:"salat",text:"Saláty"}):"dezert"==a.trida[d]&&a.tridaVar.push({name:"dezert",text:"Dezerty"})}),a.tabs=[{title:"Polední menu",template:"poledni"},{title:"Jídelní lístek",template:"jidelni"},{title:"Nápojový lístek",template:"napojovy"}],a.currentTab="jidelni",a.onclickTab=function(b){a.currentTab=b.template},a.activeTab=function(b){return b==a.currentTab}}]),angular.module("veganapp.public").controller("tablesCtrl",["$scope","getTable",function(a,b){b.getTables().success(function(b,c){a.dataTable=b,console.log(c),console.log(a.dataTable)}),a.myNumber=5,a.getNumber=function(a){return new Array(a)},a.showSecondTable=!1,a.month=["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],a.weeks=["Po","Út","St","Čt","Pá","So","Ne"],a.today=new Date,a.todayChosen=new Date,a.Calendar=new Calendar(1),a.mdays=a.Calendar.monthDays(a.today.getFullYear(),a.today.getMonth()),a.filterDay=function(a){return 0!==a},a.firstDayInWeek=a.Calendar.weekStartDate(a.today),a.lastDayInWeek=new Date(a.firstDayInWeek.getFullYear(),a.firstDayInWeek.getMonth(),a.firstDayInWeek.getDate()+7),a.nextMonth=function(b){if(11>b){if(a.today.getDate()>a.Calendar.lastDayInMonth(a.today.getFullYear(),b+1)){var c=a.Calendar.lastDayInMonth(a.today.getFullYear(),b+1);a.today.setDate(c),a.selected=c}a.today.setMonth(b+1),a.mdays=a.Calendar.monthDays(a.today.getFullYear(),a.today.getMonth())}else 11===b&&(a.today.setMonth(0),a.today.setFullYear(a.today.getFullYear()+1),a.mdays=a.Calendar.monthDays(a.today.getFullYear(),a.today.getMonth()))},a.prevMonth=function(b){var c,d=new Date;a.today.getFullYear()>=d.getFullYear()&&(b>d.getMonth()&&a.today.getFullYear()===d.getFullYear()?(a.today.getDate()>a.Calendar.lastDayInMonth(a.today.getFullYear(),b-1)&&(c=a.Calendar.lastDayInMonth(a.today.getFullYear(),b-1),a.today.setDate(c),a.selected=c),a.today.setMonth(b-1),a.mdays=a.Calendar.monthDays(a.today.getFullYear(),a.today.getMonth())):a.today.getFullYear()>d.getFullYear()&&(0===b?(a.today.setMonth(11),a.today.setFullYear(a.today.getFullYear()-1),a.mdays=a.Calendar.monthDays(a.today.getFullYear(),a.today.getMonth())):(a.today.getDate()>a.Calendar.lastDayInMonth(a.today.getFullYear(),b-1)&&(c=a.Calendar.lastDayInMonth(a.today.getFullYear(),b-1),a.today.setDate(c),a.selected=c),a.today.setMonth(b-1),a.mdays=a.Calendar.monthDays(a.today.getFullYear(),a.today.getMonth()))))},a.onclickDate=function(b,c,d){a.today=new Date(d,c,b),a.selected=b,a.showSecondTable=!0,a.firstDayInWeek=a.Calendar.weekStartDate(a.today),a.lastDayInWeek.setDate(a.firstDayInWeek.getDate()+6)},a.dnes=function(a,b,c){var d=new Date;return d.getDate()===a&&d.getMonth()===b&&d.getFullYear()===c?d.getDate():-1},a.showMonth=function(){a.showSecondTable=!1}}]),angular.module("veganapp.public").config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("public",{url:"",views:{main:{templateUrl:"/views/public/content.html",controller:"headCtrlP"}},"abstract":!0}).state("public.home",{url:"/home",views:{"public":{templateUrl:"/views/public/home.html",controller:"homeCtrl"}}}).state("public.menu",{url:"/menu",views:{"public":{templateUrl:"/views/public/menu.html",controller:"menuCtrlP"}}}).state("public.contact",{url:"/contact",views:{"public":{templateUrl:"/views/public/contact.html",controller:"contactCtrl"}}}).state("public.reservation",{url:"/reservation",views:{"public":{templateUrl:"/views/public/tables.html",controller:"tablesCtrl"}}})}]).run(["$rootScope","$state",function(a,b){a.$state=b,b.go("public.home")}]),angular.module("veganapp.public").controller("headCtrlP",["$scope","$http","$rootScope",function(a,b,c){}]),angular.module("veganapp.public").factory("menuPublic",function(a){return{getMenu:function(){return a.get("/api/menu").success(function(a){this.jsonMenu=a})},getSort:function(){return a.get("/api/menu/sort").success(function(a){this.jsonData=a})},getDailyMenu:function(){return a.get("/api/dailymenu").success(function(a){this.jsonData=a})}}}),angular.module("veganapp.public").factory("getTable",function(a){return{getTables:function(){return a.get("/api/table").success(function(a){this.jsonTables=a})}}}),angular.module("veganapp.system",["ui.router","ui.router.stateHelper","ui.bootstrap","ngRoute"]);var mongoose=require("mongoose"),config=require("./config"),dbMongo=mongoose.createConnection(config.mongoose.uri);dbMongo.on("error",console.error),dbMongo.once("open",function(){console.log("Connected to database")}),module.exports=dbMongo;var nconf=require("nconf"),path=require("path");nconf.argv().env().file({file:path.join(__dirname,"config.json")}),module.exports=nconf;var mongoose=require("mongoose"),passport=require("passport"),LocalStrategy=require("passport-local").Strategy,connection=require("../config/database"),userSchema=require("../models/user"),User=connection.model("User",userSchema);config=require("./config"),module.exports=function(a){a.serializeUser(function(a,b){b(null,a.id)}),a.deserializeUser(function(a,b){User.findById(a,function(a,c){b(a,c)})}),a.use(new LocalStrategy({username:"username",password:"password"},function(a,b,c){User.findOne({username:a},function(a,d){return a?(console.log("Chyba: local strategy"),c(a)):d?d.password!==b?c(null,!1,{message:"Incorrect password"}):c(null,d):c(null,!1,{message:"Incorrect username"})})}))};var index=require("../controllers/index"),admin=require("../controllers/admin"),menu=require("../controllers/menu"),users=require("../controllers/user"),tables=require("../controllers/table"),dailyMenu=require("../controllers/dailyMenu"),drinks=require("../controllers/drinkMenu"),auth=require("../controllers/authenticate"),passport=require("passport"),LocalStrategy=require("passport-local").Strategy;module.exports=function(a,b){a.get("/",index.render),a.get("/admin",admin.render),a.get("/api/menu",menu.findAll),a.post("/api/menu",menu.createFood),a.get("/api/menu/type",menu.enumType),a.get("/api/menu/sort",menu.enumSort),a.put("/api/menu/:id",menu.editFood),a["delete"]("/api/menu/:id",menu.deleteFood),a.get("/api/drinkmenu",drinks.findAll),a.get("/api/drinkmenu/sort",drinks.enumSort),a.get("/api/drinkmenu/id/:id",drinks.getById),a.put("api/drinkmenu/:id",drinks.editDrink),a.post("api/drinkmenu",drinks.createDrink),a["delete"]("api/drinkmenu/:id",drinks.deleteDrink),a.get("/api/dailymenu",dailyMenu.findAll),a.get("/api/dailymenu/id/:id",dailyMenu.findById),a.get("/api/dailymenu/day",dailyMenu.enumDay),a.get("/api/dailymenu/type",dailyMenu.enumType),a.get("/api/dailymenu/sort",dailyMenu.enumSort),a.get("/api/user",auth.checkAuthenticate,users.findAll),a.get("/api/table",tables.findAll),a.get("/api/user/:id",users.findUserById),a.post("/api/login",b.authenticate("local"),auth.login),a.get("/api/logged",auth.logged),a.get("/api/logout",auth.logout)};var User=require("../models/user");exports.render=function(a,b,c){b.render("admin",{title:"Vegan Restaurant"})};var local=require("passport-local").Strategy,passport=require("passport");exports.login=function(a,b){console.log(a.body),b.send(a.body)},exports.logout=function(a,b){a.logout(),b.redirect("/")},exports.checkAuthenticate=function(a,b,c){a.isAuthenticated()?c():b.render("404")},exports.logged=function(a,b){a.isAuthenticated()?console.log("Logged: ",a.session.passport.user):console.log("Not logged"),b.send(a.isAuthenticated()?a.session.passport.user:0)};var connection=require("../config/database"),dailyMenuSchema=require("../models/dailyMenu");DailyMenu=connection.model("DailyMenu",dailyMenuSchema),exports.findAll=function(a,b,c){DailyMenu.find(function(a,c){a&&b.send(a),console.log(c),b.json(c)})},exports.findById=function(a,b){DailyMenu.findById(a.params.id,function(a,c){a?b.send(a):b.json(c)})},exports.enumDay=function(a,b){var c=DailyMenu.schema.path("day").enumValues;b.send(JSON.stringify(c))},exports.enumSort=function(a,b){var c=DailyMenu.schema.path("foodSort").enumValues;b.send(JSON.stringify(c))},exports.enumType=function(a,b){var c=DailyMenu.schema.path("foodType").enumValues;b.send(JSON.stringify(c))};var connection=require("../config/database"),drinkMenuSchema=require("../models/drinkMenu");Drink=connection.model("Drink",drinkMenuSchema),exports.findAll=function(a,b,c){FindAll(b)},exports.getById=function(a,b){Drink.findById(a.params.id,function(a,c){a?b.send(a):b.json(c)})},exports.createDrink=function(a,b){var c=Drink({drinkName:a.body.drinkName,drinkDescription:a.body.drinkDescription,drinkType:a.body.drinkType,drinkSort:a.body.drinkSort,price:a.body.price});c.save(function(a,c){a?b.send(a):FindAll(b)})},exports.deleteDrink=function(a,b){Drink.findByIdAndRemove(a.params.id,function(a){a?b.send(a):FindAll(b)})},exports.editDrink=function(a,b){Drink.findByIdAndUpdate(a.body.id,{$set:a.body},function(a){a?b.send(a):FindAll(b)})},exports.enumSort=function(a,b,c){var d=Drink.schema.path("drinkSort").enumValues;b.send(JSON.stringify(d))};var Menu=require("../models/menu");exports.render=function(a,b,c){b.render("index",{title:"Vegan Restaurant"})};var connection=require("../config/database"),menuSchema=require("../models/menu");Menu=connection.model("Menu",menuSchema),exports.findAll=function(a,b,c){findAllFunc(b)},exports.createFood=function(a,b,c){var d=Number(a.body.price),e=Menu({foodName:a.body.foodName,foodDescription:a.body.foodDescription,foodType:a.body.foodType,foodSort:a.body.foodSort,price:d});e.save(function(a,c){a?b.send(a):(console.log(c),findAllFunc(b))})},exports.enumType=function(a,b,c){var d=Menu.schema.path("foodType").enumValues;b.send(JSON.stringify(d))},exports.enumSort=function(a,b,c){var d=Menu.schema.path("foodSort").enumValues;b.send(JSON.stringify(d))},exports.deleteFood=function(a,b,c){Menu.findByIdAndRemove(a.params.id,function(c){c?(console.log(c),b.send(c)):(console.log("Data remove: ",a.params.id),findAllFunc(b))}),console.log("Data req body: ",a.params.id)},exports.editFood=function(a,b){Menu.findByIdAndUpdate(a.body.id,{$set:a.body},function(a,c){a?(console.log(a),b.send(a)):findAllFunc(b)}),console.log("Edit food params ",a.params,"Req body: ",a.body)};var connection=require("../config/database"),tableSchema=require("../models/table");Table=connection.model("Table",tableSchema),exports.findAll=function(a,b,c){Table.find(function(a,c){a&&b.send(a),console.log(c),b.json(c)})};var connection=require("../config/database"),userSchema=require("../models/user");User=connection.model("User",userSchema),exports.findAll=function(a,b,c){User.find(function(a,c){a&&b.send(a),console.log(c),b.json(c)})},exports.findUserById=function(a,b){User.findById(a.params.id,function(a,c){a?b.send(a):b.json(c)})};var mongoose=require("mongoose"),connection=require("../config/database"),dailyMenuSchema=new mongoose.Schema({foodName:{type:String,unique:!1,required:!0},foodDescription:{type:String,required:!0},foodType:{type:String,required:!0,"enum":["vegan","raw"]},foodSort:{type:String,required:!0,"enum":["polevka","hlavni"]},day:{type:String,required:!0,"enum":["pondeli","utery","streda","ctvrtek","patek"]},price:{type:Number,required:!0}});module.exports=dailyMenuSchema;var mongoose=require("mongoose"),connection=require("../config/database"),drinkMenuSchema=new mongoose.Schema({drinkName:{type:String,unique:!0,required:!0},drinkDescription:{type:String,required:!0},drinkSort:{type:String,required:!0,"enum":["caj","kava","fresh","limonada"]},price:{type:Number,required:!0}});module.exports=drinkMenuSchema;var mongoose=require("mongoose"),connection=require("../config/database"),menuSchema=new mongoose.Schema({foodName:{type:String,unique:!0,required:!0},foodDescription:{type:String,required:!1},foodType:{type:String,required:!0,"enum":["vegan","raw"]},foodSort:{type:String,required:!0,"enum":["predkrm","hlavni","salat","dezert"]},price:{type:Number,required:!0}});module.exports=menuSchema;var mongoose=require("mongoose"),connection=require("../config/database"),reservationSchema=new mongoose.Schema({startDate:{type:Date,required:!0},endDate:{type:Date,required:!0},table:{type:ObjectId,required:!0},nameReserve:{type:String,required:!0},emailReserve:{type:String,required:!0},phoneReserve:{type:Number,required:!0}});module.exports=reservationSchema;var mongoose=require("mongoose"),connection=require("../config/database"),tableSchema=new mongoose.Schema({name:{type:Number,required:!0,unique:!0},seatingNum:{type:String,required:!0,"enum":["two","four"]},smoking:{type:Boolean,requred:!0}});module.exports=tableSchema;var mongoose=require("mongoose"),connection=require("../config/database"),userSchema=new mongoose.Schema({username:{type:String,unique:!0,required:!0},name:{type:String,required:!0},surname:{type:String,required:!0},role:{type:String,required:!0,"enum":["admin","employee"]},password:{type:String,required:!0},email:{type:String,required:!0},phone:{type:Number,required:!0},created:{type:Date,"default":Date.now}});module.exports=userSchema;